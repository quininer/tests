<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/xhtml;charset=utf-8">
        <meta name='referrer' content='never'>
        <title>innerHTML_TestTool</title>
        <style>
            #canvas, #canvas2, #html, #log {
                width:100%;
                height:14em;
                overflow-y:scroll
            }
            /* iframe#iframe { display:none } */
        </style>
        <script src="./love.js"></script>
    </head>
    <body>
        <textarea id="html"></textarea>
        <hr>
        <div id="canvas"></div>
        <hr>
<!--
        <button onclick="fillIframe()">document.write(innerHTML)</button>
        <button onclick="applyCssText()">Apply style.cssText()</button>
        <hr>
-->
        <textarea id="log"></textarea>
<!--    <hr>
        <div id="canvas2"></div>
        <iframe id="iframe"></iframe>
-->
        <script>
            var html = document.getElementById('html');
            var log = document.getElementById('log');
            var canvas = document.getElementById('canvas');
//          var canvas2 = document.getElementById('canvas2');
//          var iframe = document.getElementById('iframe');

            location.hash.length > 1 ? html.value = location.hash.slice(1) : false;
            location.hash = '';

            var updateCanvas = function(e){
                if(e && e.keyCode && (e.keyCode == 27 || e.keyCode == 37 || e.keyCode == 38 || e.keyCode == 39 || e.keyCode == 40)) {
                    return false;
                };
                canvas.innerHTML=html.value;
                log.value=canvas.innerHTML;
//              canvas2.innerHTML=canvas.innerHTML;
                location.hash=html.value; // a little document.write() backup
                try{
                    log.value += '\r\n\r\n=== Additional Info ===\r\nonclick: ' + canvas.firstChild.onclick;
                    log.value += '\r\nvalue: ' + canvas.firstChild.value;
                    log.value += '\r\nstyle.cssText: ' + canvas.firstChild.style.cssText;
                    log.value += '\r\ncurrentStyle.cssText: ' + canvas.firstChild.currentStyle.cssText;
                    log.value += '\r\nruntimeStyle.cssText: ' + canvas.firstChild.runtimeStyle.cssText;
                }catch(e){e};
            };
/*          var fillIframe = function(){
                iframe.contentWindow.document.write(canvas.innerHTML);
                iframe.contentWindow.document.close();
            }
            var applyCssText = function(){
                canvas2.firstChild.style.cssText = canvas.firstChild.style.cssText;
            } */
            html.onkeyup = updateCanvas;
            window.onload = updateCanvas;
        </script>
    </body>
</html>
